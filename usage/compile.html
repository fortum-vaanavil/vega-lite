<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />

    <link rel="shortcut icon" href="https://vega.github.io/favicon.ico" />

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Compiling Vega-Lite to Vega | Vega-Lite</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Compiling Vega-Lite to Vega" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Vega-Lite - a high-level grammar for statistical graphics. Vega-Lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications. Vega-Lite specifications consist of simple mappings of variables in a data set to visual encoding channels such as x, y, color, and size. These mappings are then translated into detailed visualization specifications in the form of Vega specification language. Vega-Lite produces default values for visualization components (e.g., scales, axes, and legends) in the output Vega specification using a rule-based approach, but users can explicit specify these properties to override default values." />
<meta property="og:description" content="Vega-Lite - a high-level grammar for statistical graphics. Vega-Lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications. Vega-Lite specifications consist of simple mappings of variables in a data set to visual encoding channels such as x, y, color, and size. These mappings are then translated into detailed visualization specifications in the form of Vega specification language. Vega-Lite produces default values for visualization components (e.g., scales, axes, and legends) in the output Vega specification using a rule-based approach, but users can explicit specify these properties to override default values." />
<link rel="canonical" href="https://vega.github.io/usage/compile.html" />
<meta property="og:url" content="https://vega.github.io/usage/compile.html" />
<meta property="og:site_name" content="Vega-Lite" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Compiling Vega-Lite to Vega" />
<meta name="twitter:site" content="@vega_vis" />
<script type="application/ld+json">
{"headline":"Compiling Vega-Lite to Vega","url":"https://vega.github.io/usage/compile.html","@type":"WebPage","description":"Vega-Lite - a high-level grammar for statistical graphics. Vega-Lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications. Vega-Lite specifications consist of simple mappings of variables in a data set to visual encoding channels such as x, y, color, and size. These mappings are then translated into detailed visualization specifications in the form of Vega specification language. Vega-Lite produces default values for visualization components (e.g., scales, axes, and legends) in the output Vega specification using a rule-based approach, but users can explicit specify these properties to override default values.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <script>
      const BASEURL = window.location.origin + '';
    </script>

    <link rel="stylesheet" href="/static/github.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/octicons@4.4.0/build/font/octicons.min.css" />
    <link rel="stylesheet" href="/static/main.css" />
  </head>
  <body>
    <div class="fill">
  <header>
    <nav class="page-centered">
      <div class="dropdown">
        <a class="vl-title" href="/">Vega-Lite</a>
        <div class="dropdown-content">
          <a href="https://vega.github.io/vega/">Vega</a>
          <a href="https://altair-viz.github.io/">Altair</a>
        </div>
      </div>
      <div class="vl-links">
        <div class="primary-links">
          <a href="/examples/" >Examples</a>
          <a href="/tutorials/getting_started.html" >Tutorials</a>
          <a href="/docs/" >Documentation</a>
          <a href="/usage/embed.html" class="active">Usage</a>
          <a href="/ecosystem.html" >Ecosystem</a>
        </div>
        <div class="secondary-links">
          <a href="https://www.github.com/vega/vega-lite">GitHub</a>
          <a href="https://vega.github.io/editor/#/custom/vega-lite">Try Online</a>
        </div>
      </div>
    </nav>
  </header>
  <section class="usage">
    


<div class="sub-nav">
  <nav class="page-centered">
    
    <a 
        href="/usage/embed.html" title="">Embed
    </a>
    
    <a class="active"
        href="/usage/compile.html" title="">Compile
    </a>
    
    <a 
        href="/usage/debugging.html" title="">Debugging
    </a>
    
  </nav>
</div>


<div class="page-centered page-main">
  

  <section class="page-content">
    <h1>Compiling Vega-Lite to Vega</h1>
    <p>If you would rather compile your Vega-Lite specifications into Vega, you can use Vega-Lite’s included <a href="#javascript">JavaScript compiler</a> or one of several bundled <a href="#cli">command line utilities</a>.</p>

<p>First install Vega-Lite using npm (<code>npm install vega-lite</code>) or by <a href="https://github.com/vega/vega-lite/releases/latest">downloading the latest release</a>. (For the latter, you will also have to download <a href="https://github.com/vega/vega/releases/latest">Vega</a> and <a href="https://d3js.org">D3</a>.)</p>

<h2 id="javascript">Using JavaScript</h2>

<p>If you want access to the compiled Vega spec from a JavaScript program, you can compile your Vega-Lite spec using the <code>vegaLite.compile</code> function.</p>

<pre><code class="language-js">var vgSpec = vegaLite.compile(vlSpec, options).spec;
</code></pre>

<p>If provided, the <code>options</code> argument should be an object with one or more of the following properties:</p>

<ul>
  <li><a href="#config"><code>config</code></a> sets a default config</li>
  <li><a href="#logging"><code>logger</code></a> sets a logger</li>
  <li><a href="#field-title"><code>fieldTitle</code></a> sets a field title formatter</li>
</ul>

<h3 id="config">Customized Configuration</h3>

<p>You can specify a <a href="/docs/config.html">config</a> object as a property of the <code>compile</code> function’s <code>options</code> argument. Note that configuration properties provided via the <code>config</code> property in the Vega-Lite specification, will override the configurations passed in through the <code>compile</code> function.</p>

<h3 id="logging">Customized Logging</h3>

<p>By default, warnings and other messages are printed to the JavaScript console (via <code>console.log/warn</code> methods). To redirect the log messages, you can pass a customize logger to the compile function.</p>

<pre><code class="language-js">var vgSpec = vegaLite.compile(vlSpec, {logger: logger}).spec;
</code></pre>

<p>A custom logger should implement the following interface:</p>

<pre><code class="language-typescript">interface LoggerInterface {
  level: (_: number) =&gt; number | LoggerInterface;
  warn(...args: any[]): LoggerInterface;
  info(...args: any[]): LoggerInterface;
  debug(...args: any[]): LoggerInterface;
}
</code></pre>

<h3 id="field-title">Customized Field Title Formatter</h3>

<p>To customize how Vega-Lite generates axis or legend titles for a <a href="encoding.html#field-def">field definition</a>, you can provide a <code>titleFormat</code> function as a property of the <code>compile</code> function’s <code>options</code> argument.</p>

<pre><code class="language-js">const vgSpec = vegaLite.compile(vlSpec, {
  titleFormat: function (fieldDef, config) {
    const fn = fieldDef.aggregate || fieldDef.timeUnit || (fieldDef.bin &amp;&amp; 'bin');
    if (fn) {
      return `${fn.toUpperCase()}(${fieldDef.field})`;
    } else {
      return fieldDef.field;
    }
  }
}).spec;
</code></pre>

<h2 id="cli">From the Command Line</h2>

<p>If you want to compile your Vega-Lite specs from the command line, we provide a set of scripts which make it easy to go from Vega-Lite to Vega, SVG, PNG, or PDF. These scripts are <code>vl2vg</code>, <code>vl2png</code>, <code>vl2svg</code>, and <code>vl2pdf</code> respectively.</p>

<p>Each script simply accepts your Vega-Lite specification as its first argument.</p>

<p><code>vl2svg spec.vl.json</code></p>

<p>You can also pass in data via stdin.</p>

<p><code>cat spec.vl.json | vl2svg</code></p>

<p>The <code>vg2vg</code> command supports an optional argument <code>p</code> that formats the generated Vega spec.</p>

<p><code>vl2vg spec.vl.json -p</code></p>

<p>The easiest way to run these commands is to use <a href="https://github.com/npm/npx"><code>npx</code></a>. <code>npx</code> will automatically run the commands from the local <code>node_modules/.bin</code>, or from a central cache, installing any packages needed in order for the commands to run. It Is not necessary to have Vega or Vega-Lite installed ahead of time for <code>npx</code> to work.</p>

<p><code>npx vl2vg spec.vl.json</code></p>


  </section>
</div>

  </section>
</div>

<footer>
  <div class="page-centered">
   <span class="edit-page">
      <a href="https://github.com/vega/vega-lite/edit/master/site/usage/compile.md">Edit this page</a> and submit a pull request!
    </span>

    <a href="http://idl.cs.washington.edu" title="UW Interactive Data Lab" class="idl-logo"><img src="/static/idl-logo.png"/></a>
  </div>
</footer>

    <script src="/static/bundle.js"></script>
    <script>
      // Google Analytics
      (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        (i[r] =
          i[r] ||
          function() {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-44428446-6', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
