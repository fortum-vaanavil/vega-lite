<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />

    <link rel="shortcut icon" href="https://vega.github.io/favicon.ico" />

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Faceting a Plot into a Trellis Plot | Vega-Lite</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Faceting a Plot into a Trellis Plot" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Vega-Lite - a high-level grammar for statistical graphics. Vega-Lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications. Vega-Lite specifications consist of simple mappings of variables in a data set to visual encoding channels such as x, y, color, and size. These mappings are then translated into detailed visualization specifications in the form of Vega specification language. Vega-Lite produces default values for visualization components (e.g., scales, axes, and legends) in the output Vega specification using a rule-based approach, but users can explicit specify these properties to override default values." />
<meta property="og:description" content="Vega-Lite - a high-level grammar for statistical graphics. Vega-Lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications. Vega-Lite specifications consist of simple mappings of variables in a data set to visual encoding channels such as x, y, color, and size. These mappings are then translated into detailed visualization specifications in the form of Vega specification language. Vega-Lite produces default values for visualization components (e.g., scales, axes, and legends) in the output Vega specification using a rule-based approach, but users can explicit specify these properties to override default values." />
<link rel="canonical" href="https://vega.github.io/docs/facet.html" />
<meta property="og:url" content="https://vega.github.io/docs/facet.html" />
<meta property="og:site_name" content="Vega-Lite" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Faceting a Plot into a Trellis Plot" />
<meta name="twitter:site" content="@vega_vis" />
<script type="application/ld+json">
{"headline":"Faceting a Plot into a Trellis Plot","url":"https://vega.github.io/docs/facet.html","@type":"WebPage","description":"Vega-Lite - a high-level grammar for statistical graphics. Vega-Lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications. Vega-Lite specifications consist of simple mappings of variables in a data set to visual encoding channels such as x, y, color, and size. These mappings are then translated into detailed visualization specifications in the form of Vega specification language. Vega-Lite produces default values for visualization components (e.g., scales, axes, and legends) in the output Vega specification using a rule-based approach, but users can explicit specify these properties to override default values.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <script>
      const BASEURL = window.location.origin + '';
    </script>

    <link rel="stylesheet" href="/static/github.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/octicons@4.4.0/build/font/octicons.min.css" />
    <link rel="stylesheet" href="/static/main.css" />
  </head>
  <body>
    <div class="fill">
  <header>
    <nav class="page-centered">
      <div class="dropdown">
        <a class="vl-title" href="/">Vega-Lite</a>
        <div class="dropdown-content">
          <a href="https://vega.github.io/vega/">Vega</a>
          <a href="https://altair-viz.github.io/">Altair</a>
        </div>
      </div>
      <div class="vl-links">
        <div class="primary-links">
          <a href="/examples/" >Examples</a>
          <a href="/tutorials/getting_started.html" >Tutorials</a>
          <a href="/docs/" class="active">Documentation</a>
          <a href="/usage/embed.html" >Usage</a>
          <a href="/ecosystem.html" >Ecosystem</a>
        </div>
        <div class="secondary-links">
          <a href="https://www.github.com/vega/vega-lite">GitHub</a>
          <a href="https://vega.github.io/editor/#/custom/vega-lite">Try Online</a>
        </div>
      </div>
    </nav>
  </header>
  <section class="docs">
    



<div class="page-centered page-main">
  
  <aside class="page-sidebar">
    <ul class="sidebar-nav">
      
      
      <li class="sidebar-nav-item"><a 
          href="/docs/" title="">Overview
      </a></li>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/docs/spec.html" title="">View Specification
      </a></li>
      
      <ul class="sub-sub-nav">
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/title.html" title="">Title
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/size.html" title="">Width / Height
        </a></li>
        
      </ul>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/docs/data.html" title="">Data / Datasets
      </a></li>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/docs/transform.html" title="">Transform
      </a></li>
      
      <ul class="sub-sub-nav">
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/aggregate.html" title="">Aggregate
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/bin.html" title="">Bin
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/calculate.html" title="">Calculate
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/density.html" title="">Density
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/filter.html" title="">Filter
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/flatten.html" title="">Flatten
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/fold.html" title="">Fold
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/impute.html" title="">Impute
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/joinaggregate.html" title="">Join Aggregate
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/loess.html" title="">Loess
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/lookup.html" title="">Lookup
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/pivot.html" title="">Pivot
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/quantile.html" title="">Quantile
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/regression.html" title="">Regression
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/sample.html" title="">Sample
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/stack.html" title="">Stack
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/timeunit.html" title="">Time Unit
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/window.html" title="">Window
        </a></li>
        
      </ul>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/docs/mark.html" title="">Mark
      </a></li>
      
      <ul class="sub-sub-nav">
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/arc.html" title="">Arc
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/area.html" title="">Area
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/bar.html" title="">Bar
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/boxplot.html" title="">Box Plot
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/circle.html" title="">Circle
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/errorband.html" title="">Error Band
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/errorbar.html" title="">Error Bar
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/geoshape.html" title="">Geoshape
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/image.html" title="">Image
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/line.html" title="">Line
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/point.html" title="">Point
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/rect.html" title="">Rect
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/rule.html" title="">Rule
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/square.html" title="">Square
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/text.html" title="">Text
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/tick.html" title="">Tick
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/trail.html" title="">Trail
        </a></li>
        
      </ul>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/docs/encoding.html" title="">Encoding
      </a></li>
      
      <ul class="sub-sub-nav">
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/aggregate.html" title="">Aggregate
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/axis.html" title="">Axis
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/band.html" title="">Band
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/bin.html" title="">Bin
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/condition.html" title="">Condition
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/datum.html" title="">Datum
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/field.html" title="">Field
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/format.html" title="">Format
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/header.html" title="">Header
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/impute.html" title="">Impute
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/legend.html" title="">Legend
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/scale.html" title="">Scale
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/stack.html" title="">Stack
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/sort.html" title="">Sort
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/timeunit.html" title="">Time Unit
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/type.html" title="">Type
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/value.html" title="">Value
        </a></li>
        
      </ul>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/docs/projection.html" title="">Projection
      </a></li>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/docs/composition.html" title="">View Composition
      </a></li>
      
      <ul class="sub-sub-nav">
        
        <li class="sidebar-nav-item sub-item"><a class="active"
            href="/docs/facet.html" title="">Facet
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/layer.html" title="">Layer
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/concat.html" title="">Concat
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/repeat.html" title="">Repeat
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/resolve.html" title="">Resolve
        </a></li>
        
      </ul>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/docs/selection.html" title="">Selections
      </a></li>
      
      <ul class="sub-sub-nav">
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/bind.html" title="">Bind
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/clear.html" title="">Clear
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/project.html" title="">Encodings / Fields
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/init.html" title="">Init
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/selection-mark.html" title="">Mark
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/nearest.html" title="">Nearest
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/selection-resolve.html" title="">Resolve
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/toggle.html" title="">Toggle
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/translate.html" title="">Translate
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/zoom.html" title="">Zoom
        </a></li>
        
      </ul>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/docs/config.html" title="">Config
      </a></li>
      
      
      
      
      <br>
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/docs/types.html" title="">Parameter Types
      </a></li>
      
      <ul class="sub-sub-nav">
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/datetime.html" title="">Date Time
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/gradient.html" title="">Gradient
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/docs/predicate.html" title="">Predicate
        </a></li>
        
      </ul>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/docs/tooltip.html" title="">Tooltip
      </a></li>
      
      
      
    </nav>
  </aside>
  

  <section class="page-content">
    <h1>Faceting a Plot into a Trellis Plot</h1>
    <span class="edit-page">
    <a href="https://github.com/vega/vega-lite/edit/master/site/docs/composition/facet.md">Edit this page</a>
</span>
<p><a href="https://en.wikipedia.org/wiki/Small_multiple">A Trellis plot (or small multiple)</a> is a series of similar plots that displays different subsets of the same data, facilitating comparison across subsets.</p>

<p>There are <strong>two ways</strong> to facet views in Vega-Lite:</p>

<p>First, the <a href="#facet-operator"><code>facet</code> operator</a> is one of Vega-Lite’s <a href="composition.html">view composition operators</a>. This is the most flexible way to create faceted plots and allows composition with other operators.</p>

<p>Second, as a shortcut you can use the <a href="#facet-channels"><code>facet</code>, <code>column</code>, or <code>row</code> encoding channels</a>.</p>

<!--prettier-ignore-start-->
<h2 class="no_toc" id="documentation-overview">Documentation Overview</h2>

<ul id="markdown-toc">
  <li><a href="#facet-operator" id="markdown-toc-facet-operator">Facet Operator</a>    <ul>
      <li><a href="#field-def" id="markdown-toc-field-def">Facet Field Definition</a></li>
      <li><a href="#mapping" id="markdown-toc-mapping">Row/Column Facet Mapping</a></li>
      <li><a href="#header" id="markdown-toc-header">Facet Headers</a></li>
      <li><a href="#example" id="markdown-toc-example">Example</a>        <ul>
          <li><a href="#row-full" id="markdown-toc-row-full">Row-Facet</a></li>
          <li><a href="#facet-full" id="markdown-toc-facet-full">Wrapped Facet</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#facet-row-and-column-encoding-channels" id="markdown-toc-facet-row-and-column-encoding-channels">Facet, Row, and Column Encoding Channels</a>    <ul>
      <li><a href="#facet-field-definition" id="markdown-toc-facet-field-definition">Facet Field Definition</a></li>
      <li><a href="#examples" id="markdown-toc-examples">Examples</a>        <ul>
          <li><a href="#row-encoding" id="markdown-toc-row-encoding">Row Facet (with Row Encoding)</a></li>
          <li><a href="#grid-facet-with-row-and-column-encoding" id="markdown-toc-grid-facet-with-row-and-column-encoding">Grid Facet (with Row and column Encoding)</a></li>
          <li><a href="#facet-encoding" id="markdown-toc-facet-encoding">Wrapped Facet (with Facet Encoding)</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#resolve" id="markdown-toc-resolve">Resolve</a></li>
  <li><a href="#config" id="markdown-toc-config">Facet Configuration</a></li>
</ul>

<!--prettier-ignore-end-->

<h2 id="facet-operator">Facet Operator</h2>

<p>To create a faceted view, define how the data should be faceted in <code>facet</code> and how each facet should be displayed in the <code>spec</code>.</p>

<pre><code class="language-js">{
  "facet": {
    ... // Facet definition
  },
  "spec": ...  // Specification
}
</code></pre>

<p>In addition to <a href="spec.html#common">common properties of a view specification</a>, a facet specification has the following properties:</p>

<table class="doc-table">
  <thead>
    <tr>
      <th>Property</th>
      <th class="table-column-type">Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    
    
    
    
      
      
      <tr>
        <td>facet</td>
        <td>FacetFieldDef | <a href="facet.html#mapping">FacetMapping</a>
</td>
        <td>
  
    <p><strong><em>Required.</em></strong> Definition for how to facet the data. One of: 1) <a href="https://vega.github.io/vega-lite/docs/facet.html#field-def">a field definition for faceting the plot by one field</a> 2) <a href="https://vega.github.io/vega-lite/docs/facet.html#mapping">An object that maps <code>row</code> and <code>column</code> channels to their field definitions</a></p>

  

</td>
      </tr>
    
      
      
      <tr>
        <td>spec</td>
        <td><a href="layer.html">LayerSpec</a> | <a href="unit.html">UnitSpec</a>
</td>
        <td>
  
    <p><strong><em>Required.</em></strong> A specification of the view that gets faceted.</p>

  

</td>
      </tr>
    
      
      
      <tr>
        <td>columns</td>
        <td>Number
</td>
        <td>
  
    <p>The number of columns to include in the view composition layout.</p>

<p><strong>Default value</strong>: <code>undefined</code> – An infinite number of columns (a single row) will be assumed. This is equivalent to <code>hconcat</code> (for <code>concat</code>) and to using the <code>column</code> channel (for <code>facet</code> and <code>repeat</code>).</p>

<p><strong>Note</strong>:</p>

<p>1) This property is only for: - the general (wrappable) <code>concat</code> operator (not <code>hconcat</code>/<code>vconcat</code>) - the <code>facet</code> and <code>repeat</code> operator with one field/repetition definition (without row/column nesting)</p>

<p>2) Setting the <code>columns</code> to <code>1</code> is equivalent to <code>vconcat</code> (for <code>concat</code>) and to using the <code>row</code> channel (for <code>facet</code> and <code>repeat</code>).</p>

  

</td>
      </tr>
    
  </tbody>
</table>

<h3 id="field-def">Facet Field Definition</h3>

<p>A facet <a href="encoding.html#field-def">field definition</a> has the following properties:</p>

<table class="doc-table">
  <thead>
    <tr>
      <th>Property</th>
      <th class="table-column-type">Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    
    
    
    
      
      
      <tr>
        <td>bin</td>
        <td>Boolean | <a href="bin.html#bin-parameters">BinParams</a> | Null
</td>
        <td>
  
    <p>A flag for binning a <code>quantitative</code> field, <a href="https://vega.github.io/vega-lite/docs/bin.html#params">an object defining binning parameters</a>, or indicating that the data for <code>x</code> or <code>y</code> channel are binned before they are imported into Vega-Lite (<code>"binned"</code>).</p>

<ul>
  <li>
    <p>If <code>true</code>, default <a href="https://vega.github.io/vega-lite/docs/bin.html">binning parameters</a> will be applied.</p>
  </li>
  <li>
    <p>If <code>"binned"</code>, this indicates that the data for the <code>x</code> (or <code>y</code>) channel are already binned. You can map the bin-start field to <code>x</code> (or <code>y</code>) and the bin-end field to <code>x2</code> (or <code>y2</code>). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis’s <a href="https://vega.github.io/vega-lite/docs/axis.html#ticks"><code>tickMinStep</code></a> property.</p>
  </li>
</ul>

<p><strong>Default value:</strong> <code>false</code></p>

<p><strong>See also:</strong> <a href="https://vega.github.io/vega-lite/docs/bin.html"><code>bin</code></a> documentation.</p>

  

</td>
      </tr>
    
      
      
      <tr>
        <td>field</td>
        <td><a href="field.html">Field</a>
</td>
        <td>
  
    <p><strong>Required.</strong> A string defining the name of the field from which to pull a data value or an object defining iterated values from the <a href="https://vega.github.io/vega-lite/docs/repeat.html"><code>repeat</code></a> operator.</p>

<p><strong>See also:</strong> <a href="https://vega.github.io/vega-lite/docs/field.html"><code>field</code></a> documentation.</p>

<p><strong>Notes:</strong> 1)  Dots (<code>.</code>) and brackets (<code>[</code> and <code>]</code>) can be used to access nested objects (e.g., <code>"field": "foo.bar"</code> and <code>"field": "foo['bar']"</code>). If field names contain dots or brackets but are not nested, you can use <code>\\</code> to escape dots and brackets (e.g., <code>"a\\.b"</code> and <code>"a\\[0\\]"</code>). See more details about escaping in the <a href="https://vega.github.io/vega-lite/docs/field.html">field documentation</a>. 2) <code>field</code> is not required if <code>aggregate</code> is <code>count</code>.</p>

  

</td>
      </tr>
    
      
      
      <tr>
        <td>timeUnit</td>
        <td><a href="timeunit.html">TimeUnit</a> | <a href="timeunit.html#params">TimeUnitParams</a>
</td>
        <td>
  
    <p>Time unit (e.g., <code>year</code>, <code>yearmonth</code>, <code>month</code>, <code>hours</code>) for a temporal field. or <a href="https://vega.github.io/vega-lite/docs/type.html#cast">a temporal field that gets casted as ordinal</a>.</p>

<p><strong>Default value:</strong> <code>undefined</code> (None)</p>

<p><strong>See also:</strong> <a href="https://vega.github.io/vega-lite/docs/timeunit.html"><code>timeUnit</code></a> documentation.</p>

  

</td>
      </tr>
    
      
      
      <tr>
        <td>type</td>
        <td>String
</td>
        <td>
  
    <p>The type of measurement (<code>"quantitative"</code>, <code>"temporal"</code>, <code>"ordinal"</code>, or <code>"nominal"</code>) for the encoded field or constant value (<code>datum</code>). It can also be a <code>"geojson"</code> type for encoding <a href="https://vega.github.io/vega-lite/docs/geoshape.html">‘geoshape’</a>.</p>

<p>Vega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified <code>aggregate</code> (except <code>argmin</code> and <code>argmax</code>), <code>bin</code>, scale type, custom <code>sort</code> order, nor <code>timeUnit</code> or (2) if you wish to use an ordinal scale for a field with <code>bin</code> or <code>timeUnit</code>.</p>

<p><strong>Default value:</strong></p>

<p>1) For a data <code>field</code>, <code>"nominal"</code> is the default data type unless the field encoding has <code>aggregate</code>, <code>channel</code>, <code>bin</code>, scale type, <code>sort</code>, or <code>timeUnit</code> that satisfies the following criteria: - <code>"quantitative"</code> is the default type if (1) the encoded field contains <code>bin</code> or <code>aggregate</code> except <code>"argmin"</code> and <code>"argmax"</code>, (2) the encoding channel is <code>latitude</code> or <code>longitude</code> channel or (3) if the specified scale type is <a href="https://vega.github.io/vega-lite/docs/scale.html#type">a quantitative scale</a>. - <code>"temporal"</code> is the default type if (1) the encoded field contains <code>timeUnit</code> or (2) the specified scale type is a time or utc scale - <code>ordinal""</code> is the default type if (1) the encoded field contains a <a href="https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order">custom <code>sort</code> order</a>, (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is <code>order</code>.</p>

<p>2) For a constant value in data domain (<code>datum</code>): - <code>"quantitative"</code> if the datum is a number - <code>"nominal"</code> if the datum is a string - <code>"temporal"</code> if the datum is <a href="https://vega.github.io/vega-lite/docs/datetime.html">a date time object</a></p>

<p><strong>Note:</strong> - Data <code>type</code> describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data. - Data values for a temporal field can be either a date-time string (e.g., <code>"2015-03-07 12:32:17"</code>, <code>"17:01"</code>, <code>"2015-03-16"</code>. <code>"2015"</code>) or a timestamp number (e.g., <code>1552199579097</code>). - When using with <a href="https://vega.github.io/vega-lite/docs/bin.html"><code>bin</code></a>, the <code>type</code> property can be either <code>"quantitative"</code> (for using a linear bin scale) or <a href="https://vega.github.io/vega-lite/docs/type.html#cast-bin"><code>"ordinal"</code> (for using an ordinal bin scale)</a>. - When using with <a href="https://vega.github.io/vega-lite/docs/timeunit.html"><code>timeUnit</code></a>, the <code>type</code> property can be either <code>"temporal"</code> (default, for using a temporal scale) or <a href="https://vega.github.io/vega-lite/docs/type.html#cast-bin"><code>"ordinal"</code> (for using an ordinal scale)</a>. - When using with <a href="https://vega.github.io/vega-lite/docs/aggregate.html"><code>aggregate</code></a>, the <code>type</code> property refers to the post-aggregation data type. For example, we can calculate count <code>distinct</code> of a categorical field <code>"cat"</code> using <code>{"aggregate": "distinct", "field": "cat"}</code>. The <code>"type"</code> of the aggregate output is <code>"quantitative"</code>. - Secondary channels (e.g., <code>x2</code>, <code>y2</code>, <code>xError</code>, <code>yError</code>) do not have <code>type</code> as they must have exactly the same type as their primary channels (e.g., <code>x</code>, <code>y</code>).</p>

<p><strong>See also:</strong> <a href="https://vega.github.io/vega-lite/docs/type.html"><code>type</code></a> documentation.</p>

  

</td>
      </tr>
    
      
      
      <tr>
        <td>header</td>
        <td><a href="facet.html#header">Header</a>
</td>
        <td>
  
    <p>An object defining properties of a facet’s header.</p>

  

</td>
      </tr>
    
  </tbody>
</table>

<p><strong>Note</strong></p>

<ol>
  <li>Unlike a <a href="encoding.html#position-field-def">positional field definition</a>, a facet field definition has the <code>header</code> property instead of <code>scale</code> and <code>axis</code>.</li>
  <li>Since <code>facet</code>, <code>row</code> and <code>column</code> represent actual data fields that are used to partition the data, they cannot encode a constant <code>value</code>. In addition, you should not facet by quantitative fields unless they are <a href="bin.html">binned</a>, or temporal fields unless you use <a href="timeunit.html"><code>timeUnit</code></a>.</li>
</ol>

<h3 id="mapping">Row/Column Facet Mapping</h3>

<p>The <code>facet</code> property of a faceted view specification describes mappings between <code>row</code> and <code>column</code> and their field definitions:</p>

<table class="doc-table">
  <thead>
    <tr>
      <th>Property</th>
      <th class="table-column-type">Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    
    
    
    
      
      
      <tr>
        <td>column</td>
        <td>FacetFieldDef
</td>
        <td>
  
    <p>A field definition for the horizontal facet of trellis plots.</p>

  

</td>
      </tr>
    
      
      
      <tr>
        <td>row</td>
        <td>FacetFieldDef
</td>
        <td>
  
    <p>A field definition for the vertical facet of trellis plots.</p>

  

</td>
      </tr>
    
  </tbody>
</table>

<h3 id="header">Facet Headers</h3>

<p>Similar to axes of position channels, a <a href="header.html">header</a> of a facet channel provides guides to convey the data value that each row and column represent.</p>

<p>You can find more about facet headers in the <a href="header.html">header documentation</a>.</p>

<h3 id="example">Example</h3>

<p>Here are examples of full row-facet and wrapped facet specifications. For more example, see the <a href="/examples/#trellis">example gallery</a>.</p>

<h4 id="row-full">Row-Facet</h4>

<p>The following specification uses the <code>facet</code> operator to vertically facet the histograms for the “horsepower” of cars by “origin” (using <code>"row"</code>). Each chart shows the histogram for one origin (Europe, Japan, and USA).</p>

<p><span class="vl-example" data-dir="normalized" data-name="trellis_bar_histogram_normalized"></span></p>

<p>This is the same example as <a href="#row-encoding">below</a> but the facet operator is more flexible as it allows composition and more customization such as overriding scale, axis, and legend resolution.</p>

<h4 id="facet-full">Wrapped Facet</h4>

<p><span class="vl-example" data-name="trellis_barley"></span></p>

<h2 id="facet-row-and-column-encoding-channels">Facet, Row, and Column Encoding Channels</h2>

<p>The <a href="encoding.html#facet">facet channels</a> (<code>facet</code>, <code>row</code>, and <code>column</code>) are <a href="encoding.html#channels">encoding channels</a> that serves as macros for a facet specification. Vega-Lite automatically translates this shortcut to use the facet operator.</p>

<h3 id="facet-field-definition">Facet Field Definition</h3>

<p>In addition to <a href="field.html"><code>field</code></a>, <a href="type.html"><code>type</code></a>, <a href="bin.html"><code>bin</code></a>, and <a href="timeunit.html"><code>timeUnit</code></a>, <a href="#field-def">field definitions</a> for <code>row</code>, <code>column</code> and <code>facet</code> channels may also include these properties:</p>

<table class="doc-table">
  <thead>
    <tr>
      <th>Property</th>
      <th class="table-column-type">Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    
    
    
    
      
      
      <tr>
        <td>align</td>
        <td>String
</td>
        <td>
  
    <p>The alignment to apply to row/column facet’s subplot. The supported string values are <code>"all"</code>, <code>"each"</code>, and <code>"none"</code>.</p>

<ul>
  <li>For <code>"none"</code>, a flow layout will be used, in which adjacent subviews are simply placed one after the other. - For <code>"each"</code>, subviews will be aligned into a clean grid structure, but each row or column may be of variable size. - For <code>"all"</code>, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.</li>
</ul>

<p><strong>Default value:</strong> <code>"all"</code>.</p>

  

</td>
      </tr>
    
      
      
      <tr>
        <td>center</td>
        <td>Boolean
</td>
        <td>
  
    <p>Boolean flag indicating if facet’s subviews should be centered relative to their respective rows or columns.</p>

<p><strong>Default value:</strong> <code>false</code></p>

  

</td>
      </tr>
    
      
      
      <tr>
        <td>spacing</td>
        <td>Number
</td>
        <td>
  
    <p>The spacing in pixels between facet’s sub-views.</p>

<p><strong>Default value</strong>: Depends on <code>"spacing"</code> property of <a href="https://vega.github.io/vega-lite/docs/config.html#view-config">the view composition configuration</a> (<code>20</code> by default)</p>

  

</td>
      </tr>
    
  </tbody>
</table>

<p>In addition, the <code>facet</code> channel should include the <code>columns</code> property:</p>

<table class="doc-table">
  <thead>
    <tr>
      <th>Property</th>
      <th class="table-column-type">Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    
    
    
    
      
      
      <tr>
        <td>columns</td>
        <td>Number
</td>
        <td>
  
    <p>The number of columns to include in the view composition layout.</p>

<p><strong>Default value</strong>: <code>undefined</code> – An infinite number of columns (a single row) will be assumed. This is equivalent to <code>hconcat</code> (for <code>concat</code>) and to using the <code>column</code> channel (for <code>facet</code> and <code>repeat</code>).</p>

<p><strong>Note</strong>:</p>

<p>1) This property is only for: - the general (wrappable) <code>concat</code> operator (not <code>hconcat</code>/<code>vconcat</code>) - the <code>facet</code> and <code>repeat</code> operator with one field/repetition definition (without row/column nesting)</p>

<p>2) Setting the <code>columns</code> to <code>1</code> is equivalent to <code>vconcat</code> (for <code>concat</code>) and to using the <code>row</code> channel (for <code>facet</code> and <code>repeat</code>).</p>

  

</td>
      </tr>
    
  </tbody>
</table>

<p>Meanwhile, the <code>row</code> and <code>column</code> channel could include the following properties:</p>

<table class="doc-table">
  <thead>
    <tr>
      <th>Property</th>
      <th class="table-column-type">Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    
    
    
    
      
      
      <tr>
        <td>align</td>
        <td>String
</td>
        <td>
  
    <p>The alignment to apply to row/column facet’s subplot. The supported string values are <code>"all"</code>, <code>"each"</code>, and <code>"none"</code>.</p>

<ul>
  <li>For <code>"none"</code>, a flow layout will be used, in which adjacent subviews are simply placed one after the other. - For <code>"each"</code>, subviews will be aligned into a clean grid structure, but each row or column may be of variable size. - For <code>"all"</code>, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.</li>
</ul>

<p><strong>Default value:</strong> <code>"all"</code>.</p>

  

</td>
      </tr>
    
      
      
      <tr>
        <td>center</td>
        <td>Boolean
</td>
        <td>
  
    <p>Boolean flag indicating if facet’s subviews should be centered relative to their respective rows or columns.</p>

<p><strong>Default value:</strong> <code>false</code></p>

  

</td>
      </tr>
    
      
      
      <tr>
        <td>spacing</td>
        <td>Number
</td>
        <td>
  
    <p>The spacing in pixels between facet’s sub-views.</p>

<p><strong>Default value</strong>: Depends on <code>"spacing"</code> property of <a href="https://vega.github.io/vega-lite/docs/config.html#view-config">the view composition configuration</a> (<code>20</code> by default)</p>

  

</td>
      </tr>
    
  </tbody>
</table>

<h3 id="examples">Examples</h3>

<p>Here are examples of row-facet and wrapped facet plots that use encoding to specify the faceted fields. For more example, see the <a href="/examples/#trellis">example gallery</a>.</p>

<h4 id="row-encoding">Row Facet (with Row Encoding)</h4>

<p><span class="vl-example" data-name="trellis_bar_histogram"></span></p>

<p>Under the hood, Vega-Lite translates this spec with <code>"row"</code> channel to the more flexible <a href="#row-full">specs with the facet operator above</a>.</p>

<h4 id="grid-facet-with-row-and-column-encoding">Grid Facet (with Row and column Encoding)</h4>

<p>Using both <code>"row"</code> and <code>"column"</code> channels produce a grid of small multiples.</p>

<p><span class="vl-example" data-name="facet_grid_bar"></span></p>

<h4 id="facet-encoding">Wrapped Facet (with Facet Encoding)</h4>

<p><span class="vl-example" data-name="trellis_barley"></span></p>

<p>Under the hood, Vega-Lite translates this spec with <code>"facet"</code> channel to the more flexible <a href="#facet-full">specs with the facet operator above</a>.</p>

<h2 id="resolve">Resolve</h2>

<p>The default <a href="resolve.html">resolutions</a> for row/column facet are shared scales, axes, and legends.</p>

<p>To override this behavior, you can set <code>resolve</code> to <code>"independent"</code>:</p>

<p><span class="vl-example" data-name="trellis_barley_independent"></span></p>

<h2 id="config">Facet Configuration</h2>

<pre><code class="language-js">// Top-level View Specification
{
  ...,
  "config": { // Configuration Object

    "facet": { // - Facet Configuration
      "spacing": ...,
      "columns": ...,
    },
    ...
  }
}
</code></pre>

<p>The facet configuration supports the following properties:</p>

<table class="doc-table">
  <thead>
    <tr>
      <th>Property</th>
      <th class="table-column-type">Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    
    
    
    
      
      
      <tr>
        <td>columns</td>
        <td>Number
</td>
        <td>
  
    <p>The number of columns to include in the view composition layout.</p>

<p><strong>Default value</strong>: <code>undefined</code> – An infinite number of columns (a single row) will be assumed. This is equivalent to <code>hconcat</code> (for <code>concat</code>) and to using the <code>column</code> channel (for <code>facet</code> and <code>repeat</code>).</p>

<p><strong>Note</strong>:</p>

<p>1) This property is only for: - the general (wrappable) <code>concat</code> operator (not <code>hconcat</code>/<code>vconcat</code>) - the <code>facet</code> and <code>repeat</code> operator with one field/repetition definition (without row/column nesting)</p>

<p>2) Setting the <code>columns</code> to <code>1</code> is equivalent to <code>vconcat</code> (for <code>concat</code>) and to using the <code>row</code> channel (for <code>facet</code> and <code>repeat</code>).</p>

  

</td>
      </tr>
    
      
      
      <tr>
        <td>spacing</td>
        <td>Number
</td>
        <td>
  
    <p>The default spacing in pixels between composed sub-views.</p>

<p><strong>Default value</strong>: <code>20</code></p>

  

</td>
      </tr>
    
  </tbody>
</table>



  </section>
</div>

  </section>
</div>

<footer>
  <div class="page-centered">
   <span class="edit-page">
      <a href="https://github.com/vega/vega-lite/edit/master/site/docs/composition/facet.md">Edit this page</a> and submit a pull request!
    </span>

    <a href="http://idl.cs.washington.edu" title="UW Interactive Data Lab" class="idl-logo"><img src="/static/idl-logo.png"/></a>
  </div>
</footer>

    <script src="/static/bundle.js"></script>
    <script>
      // Google Analytics
      (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        (i[r] =
          i[r] ||
          function() {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-44428446-6', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
